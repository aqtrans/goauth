image: archlinux
packages:
  - go
  - git
secrets:
  - 9ef6e07e-cae5-4ec0-b799-8898de1f742b
sources:
  - ssh://git@git.jba.io:go/auth.git
environment:
  project: auth
triggers:
  - action: email
    condition: failure
    to: Jordan Anderson <jordan@jba.io>
tasks:
  - setup: |
      cd ${project}
      go get -d
  - test: |
      cd ${project}
      go test
      go test -cover
      go test -bench=.
